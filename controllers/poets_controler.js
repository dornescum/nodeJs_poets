let dummy_poets = [
	{
		"id": "1",
		"first_name": "aurel",
		"second_name": "popescu",
		"desc": {
			"oras": "Bucuresti",
			"cartier":"Rahova"
		},
		"biography": {
			"year": {
				"1970": "first_book",
				"1971": "second_book",
				"1972": "third_book"
			}
		},
		"prison_time": {
			"year": {
				"1980": {
					"start_time": "1980",
					"realese_time": "1985",
					"accusation": "murder"
				},
				"1986": {
					"start_time": "1986",
					"release_time": "1990",
					"accusation": "theft"
				}
			}
		},
		"after_prison": {
			"sickness": {
				"disease": "migraine",
				"treatment": {
					"hospital": "nr_9",
					"doctors": {
						"first_doctor": {
							"first_name": "Ionut",
							"second_name": "Popescu",
							"branch": "General medicine"
						},
						"second_doctor": {
							"first_name": "Narian",
							"second_name": "Popescu",
							"branch": "General medicine"
						}
					}
				}
			}
		},
		"death": "1991"
	},
{
		"id": "2",
		"first_name": "ana",
		"second_name": "popescu",
		"desc": {
			"oras": "Bucuresti",
			"cartier":"Rahova"
		},
		"biography": {
			"year": {
				"1970": "first_book",
				"1971": "second_book",
				"1972": "third_book"
			}
		},
		"prison_time": {
			"year": {
				"1980": {
					"start_time": "1980",
					"realese_time": "1985",
					"accusation": "murder"
				},
				"1986": {
					"start_time": "1986",
					"release_time": "1990",
					"accusation": "theft"
				}
			}
		},
		"after_prison": {
			"sickness": {
				"disease": "migraine",
				"treatment": {
					"hospital": "nr_9",
					"doctors": {
						"first_doctor": {
							"first_name": "Ionut",
							"second_name": "Popescu",
							"branch": "General medicine"
						},
						"second_doctor": {
							"first_name": "Narian",
							"second_name": "Popescu",
							"branch": "General medicine"
						}
					}
				}
			}
		},
		"death": "1991"
	},
{
		"id": "3",
		"first_name": "andrei",
		"second_name": "popescu",
		"desc": {
			"oras": "Bucuresti",
			"cartier":"Rahova"
		},
		"biography": {
			"year": {
				"1970": "first_book",
				"1971": "second_book",
				"1972": "third_book"
			}
		},
		"prison_time": {
			"year": {
				"1980": {
					"start_time": "1980",
					"realese_time": "1985",
					"accusation": "murder"
				},
				"1986": {
					"start_time": "1986",
					"release_time": "1990",
					"accusation": "theft"
				}
			}
		},
		"after_prison": {
			"sickness": {
				"disease": "migraine",
				"treatment": {
					"hospital": "nr_9",
					"doctors": {
						"first_doctor": {
							"first_name": "Ionut",
							"second_name": "Popescu",
							"branch": "General medicine"
						},
						"second_doctor": {
							"first_name": "Narian",
							"second_name": "Popescu",
							"branch": "General medicine"
						}
					}
				}
			}
		},
		"death": "1991"
	},
{
		"id": "4",
		"first_name": "costel",
		"second_name": "popescu",
		"desc": {
			"oras": "Bucuresti",
			"cartier":"Rahova"
		},
		"biography": {
			"year": {
				"1970": "first_book",
				"1971": "second_book",
				"1972": "third_book"
			}
		},
		"prison_time": {
			"year": {
				"1980": {
					"start_time": "1980",
					"realese_time": "1985",
					"accusation": "murder"
				},
				"1986": {
					"start_time": "1986",
					"release_time": "1990",
					"accusation": "theft"
				}
			}
		},
		"after_prison": {
			"sickness": {
				"disease": "migraine",
				"treatment": {
					"hospital": "nr_9",
					"doctors": {
						"first_doctor": {
							"first_name": "Ionut",
							"second_name": "Popescu",
							"branch": "General medicine"
						},
						"second_doctor": {
							"first_name": "Narian",
							"second_name": "Popescu",
							"branch": "General medicine"
						}
					}
				}
			}
		},
		"death": "1991"
	},
{
		"id": "5",
		"first_name": "costel",
		"second_name": "popescu",
		"desc": {
			"oras": "Bucuresti",
			"cartier":"Rahova"
		},
		"biography": {
			"year": {
				"1970": "first_book",
				"1971": "second_book",
				"1972": "third_book"
			}
		},
		"prison_time": {
			"year": {
				"1980": {
					"start_time": "1980",
					"realese_time": "1985",
					"accusation": "murder"
				},
				"1986": {
					"start_time": "1986",
					"release_time": "1990",
					"accusation": "theft"
				}
			}
		},
		"after_prison": {
			"sickness": {
				"disease": "migraine",
				"treatment": {
					"hospital": "nr_9",
					"doctors": {
						"first_doctor": {
							"first_name": "Ionut",
							"second_name": "Popescu",
							"branch": "General medicine"
						},
						"second_doctor": {
							"first_name": "Narian",
							"second_name": "Popescu",
							"branch": "General medicine"
						}
					}
				}
			}
		},
		"death": "1991"
	},
{
		"id": "6",
		"first_name": "costin",
		"second_name": "popescu",
		"desc": {
			"oras": "Bucuresti",
			"cartier":"Rahova"
		},
		"biography": {
			"year": {
				"1970": "first_book",
				"1971": "second_book",
				"1972": "third_book"
			}
		},
		"prison_time": {
			"year": {
				"1980": {
					"start_time": "1980",
					"realese_time": "1985",
					"accusation": "murder"
				},
				"1986": {
					"start_time": "1986",
					"release_time": "1990",
					"accusation": "theft"
				}
			}
		},
		"after_prison": {
			"sickness": {
				"disease": "migraine",
				"treatment": {
					"hospital": "nr_9",
					"doctors": {
						"first_doctor": {
							"first_name": "Ionut",
							"second_name": "Popescu",
							"branch": "General medicine"
						},
						"second_doctor": {
							"first_name": "Narian",
							"second_name": "Popescu",
							"branch": "General medicine"
						}
					}
				}
			}
		},
		"death": "1991"
	},
{
		"id": "7",
		"first_name": "dan",
		"second_name": "popescu",
		"desc": {
			"oras": "Bucuresti",
			"cartier":"Rahova"
		},
		"biography": {
			"year": {
				"1970": "first_book",
				"1971": "second_book",
				"1972": "third_book"
			}
		},
		"prison_time": {
			"year": {
				"1980": {
					"start_time": "1980",
					"realese_time": "1985",
					"accusation": "murder"
				},
				"1986": {
					"start_time": "1986",
					"release_time": "1990",
					"accusation": "theft"
				}
			}
		},
		"after_prison": {
			"sickness": {
				"disease": "migraine",
				"treatment": {
					"hospital": "nr_9",
					"doctors": {
						"first_doctor": {
							"first_name": "Ionut",
							"second_name": "Popescu",
							"branch": "General medicine"
						},
						"second_doctor": {
							"first_name": "Narian",
							"second_name": "Popescu",
							"branch": "General medicine"
						}
					}
				}
			}
		},
		"death": "1991"
	},
{
		"id": "8",
		"first_name": "elena",
		"second_name": "popescu",
		"desc": {
			"oras": "Bucuresti",
			"cartier":"Rahova"
		},
		"biography": {
			"year": {
				"1970": "first_book",
				"1971": "second_book",
				"1972": "third_book"
			}
		},
		"prison_time": {
			"year": {
				"1980": {
					"start_time": "1980",
					"realese_time": "1985",
					"accusation": "murder"
				},
				"1986": {
					"start_time": "1986",
					"release_time": "1990",
					"accusation": "theft"
				}
			}
		},
		"after_prison": {
			"sickness": {
				"disease": "migraine",
				"treatment": {
					"hospital": "nr_9",
					"doctors": {
						"first_doctor": {
							"first_name": "Ionut",
							"second_name": "Popescu",
							"branch": "General medicine"
						},
						"second_doctor": {
							"first_name": "Narian",
							"second_name": "Popescu",
							"branch": "General medicine"
						}
					}
				}
			}
		},
		"death": "1991"
	},
{
		"id": "9",
		"first_name": "george",
		"second_name": "popescu",
		"desc": {
			"oras": "Bucuresti",
			"cartier":"Rahova"
		},
		"biography": {
			"year": {
				"1970": "first_book",
				"1971": "second_book",
				"1972": "third_book"
			}
		},
		"prison_time": {
			"year": {
				"1980": {
					"start_time": "1980",
					"realese_time": "1985",
					"accusation": "murder"
				},
				"1986": {
					"start_time": "1986",
					"release_time": "1990",
					"accusation": "theft"
				}
			}
		},
		"after_prison": {
			"sickness": {
				"disease": "migraine",
				"treatment": {
					"hospital": "nr_9",
					"doctors": {
						"first_doctor": {
							"first_name": "Ionut",
							"second_name": "Popescu",
							"branch": "General medicine"
						},
						"second_doctor": {
							"first_name": "Narian",
							"second_name": "Popescu",
							"branch": "General medicine"
						}
					}
				}
			}
		},
		"death": "1991"
	},
{
		"id": "10",
		"first_name": "ionut",
		"second_name": "popescu",
		"desc": {
			"oras": "Bucuresti",
			"cartier":"Rahova"
		},
		"biography": {
			"year": {
				"1970": "first_book",
				"1971": "second_book",
				"1972": "third_book"
			}
		},
		"prison_time": {
			"year": {
				"1980": {
					"start_time": "1980",
					"realese_time": "1985",
					"accusation": "murder"
				},
				"1986": {
					"start_time": "1986",
					"release_time": "1990",
					"accusation": "theft"
				}
			}
		},
		"after_prison": {
			"sickness": {
				"disease": "migraine",
				"treatment": {
					"hospital": "nr_9",
					"doctors": {
						"first_doctor": {
							"first_name": "Ionut",
							"second_name": "Popescu",
							"branch": "General medicine"
						},
						"second_doctor": {
							"first_name": "Narian",
							"second_name": "Popescu",
							"branch": "General medicine"
						}
					}
				}
			}
		},
		"death": "1991"
	},



];

const Poet = require('../models/schema')


const getPoetsById = (req, res, next) => {
	const poetId = req.params.id;
	const poet = dummy_poets.find(p =>{
		return p.id === poetId;
	})
	// if(!poet){
	// 	return res.status(404).json({message: 'no poet'});
	// }
	// dc esti async folosesti next(error)
	if(!poet){
		const error = new Error('no poet found');
		error.code = 404;
		// throw error;
		return next(error); // pt next(error) trebuie return!!!
	}

	res.json({poet});
	// res.json({poet:poet});
}
const deletePoet = (req, res, next)=>{
	const poetId = req.params.id;
	dummy_poets = dummy_poets.filter(p => p.id !== poetId)
	res.status(200).json({message: 'deleted poet'})

}

const createPoet = async (req,res, next)=>{
	const {first_name, second_name, id, prison_time, desc, biography, death} = req.body;
	const createdPoet = {
		first_name,
		second_name,
		id,
		prison_time,
		desc,
		biography,
		death
	}
	dummy_poets.push(createdPoet)

	// const createdPoet = new Poet(
	// 	first_name,
	// 	second_name,
	// )
	// try	{
	// 	await createdPoet.save()
	// } catch(err){
	// 	console.log(err)
	// 	return next(err)
	// }

	res.status(201).json({poet: createdPoet})
}

// module.exports = getPoetsById;
// module.exports = deletePoet;

exports.getPoetsById = getPoetsById;
exports.deletePoet = deletePoet;
exports.createPoet = createPoet;



